@model Modelo.Bodega.Bodega_Productos_VM

<div id="EditarOVisualizarBodega" class="container shadow-lg p-4">
    <form class="row" id="EditarOVisualizarBodegaForm">

        <p class="text-start my-3 fw-bold fs-4">Datos Bodega</p>

        <!-- ID oculto -->
        @Html.HiddenFor(model => model.BodegaId)

        <div class="col-12 mb-3">
            <label for="NombreBodega" class="form-label">Nombre Bodega:</label>
            @Html.EditorFor(model => model.NombreBodega, new { htmlAttributes = new { @class = "form-control", @id = "NombreBodega" } })
            @Html.ValidationMessageFor(model => model.NombreBodega, "", new { @class = "text-danger" })
        </div>

        <hr style="border: 2PX solid black;" class="my-4" />

        <p class="text-start my-3 fw-bold fs-4">Productos de la Bodega</p>

        <div id="DivTablaProductosBodega" style="margin-bottom: 30px">
            @if (ViewBag.Visualizar != 1)
            {
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="mb-0">Lista de productos</h5>
                    <button id="btnAgregarFilaEditar" type="button" class="btn btn-success">
                        <i class="fa-solid fa-plus"></i> Agregar producto
                    </button>
                </div>
            }

            <table id="TablaProductosBodegaEditar" class="table table-striped table-hover table-bordered rounded-2 w-100">
                <thead class="bg-light">
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Productos != null && Model.Productos.Any())
                    {
                        foreach (var item in Model.Productos)
                        {
                            <tr>
                                <td>
                                    <span class="productoTexto" data-id="@item.ProductoId">@item.Nombre</span>
                                </td>
                                <td>
                                    <span class="cantidadTexto">@item.cantidad</span>
                                </td>
                                <td class="text-center">
                                    <button type="button" class="btn btn-primary btn-sm btnEditarFilaBodegaEditar" title="Editar">
                                        <i class="fa-solid fa-pen-to-square"></i>
                                    </button>
                                    <button type="button" class="btn btn-danger btn-sm btnEliminarFilaBodegaEditar" title="Eliminar">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>

        <div style="text-align: right; background-color: #D3CECE;" class="p-2 pt-2">

            <button id="cancelButtonEditar" type="button" class="btn btn-danger">
                <i class="fa-solid fa-rotate-left"></i> Cancelar
            </button>

            @if (ViewBag.Visualizar != 1)
            {
                <button type="button" id="EditarDatosBodega" class="btn btn-primary">
                    <i class="fa-solid fa-floppy-disk"></i> Editar
                </button>
            }

        </div>


    </form>
</div>

<script type="text/javascript" src="~/JSscripts/Bodega/EditarBodega.js"></script>
@if (ViewBag.Visualizar == 1)
{
    <script>
        $(function () {
            $('#EditarOVisualizarBodegaForm')
                .find('input, select, button')
                .not('#cancelButtonEditar')
                .prop('disabled', true);
        });
    </script>
}
